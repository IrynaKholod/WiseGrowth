{"version":3,"file":"static/js/315.90314457.chunk.js","mappings":"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","sources":["Api/Api.jsx","components/VideoPlayer/VideoPlayer.jsx","components/LessonsList/LessonsList.stiled.js","components/LessonsList/LessonsList.jsx","pages/Course/Course.styled.js","pages/Course/Course.jsx"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://api.wisey.app/api/v1';\n// const PROXY_URL = \"https://cors-proxy.fringe.zone/\";\n\nconst instance = axios.create({\n  baseURL: BASE_URL,\n});\n\nconst token = {\n  set(token) {\n    instance.defaults.headers.common.Authorization = `Bearer ${token}`;\n  },\n  unset() {\n    instance.defaults.headers.common.Authorization = '';\n  },\n};\n\nexport const GetToken = async () => {\n  try {\n    const { data } = await instance.get(\n      '/auth/anonymous?platform=subscriptions'\n    );\n    token.set(data.token);\n    return data.token;\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nexport const GetAllCourses = async () => {\n  await GetToken();\n  const response = await instance.get('/core/preview-courses');\n  return response;\n};\n\nexport const GetCourseById = async id => {\n  await GetToken();\n  const response = await instance.get(`/core/preview-courses/${id}`);\n  return response.data;\n};\n","import Hls from 'hls.js';\n\nexport const VideoPlayer = (link, videoElement, startPosition) => {\n  let hls = null;\n  if (Hls.isSupported()) {\n    hls = new Hls({ startPosition: startPosition });\n    hls.on(Hls.Events.MEDIA_ATTACHED, function () {\n      console.log('video and hls.js are now bound together !');\n    });\n    hls.on(Hls.Events.MANIFEST_PARSED, function (event, data) {\n      console.log(\n        'manifest loaded, found ' + data.levels.length + ' quality level'\n      );\n    });\n    hls.loadSource(`${link}`);\n    // bind them together\n    hls.attachMedia(videoElement);\n  }\n  return hls;\n};\n","import styled from 'styled-components';\nimport { ImEyeBlocked } from 'react-icons/im';\n\nexport const LessonsListStyle = styled.ul`\n  margin-left: 15px;\n  list-style: square;\n`;\n\nexport const LessonsListItem = styled.li`\n  font-size: 20px;\n  cursor: pointer;\n  margin-bottom: 10px;\n  &:hover {\n    color: rgba(72, 37, 209, 255);\n  }\n\n`;\n\nexport const LockedIcon = styled(ImEyeBlocked)`\n  color: rgba(72, 37, 209, 255);\n`;\n\nexport const LessonLink =styled.a`\n&:active {\n  color: red;\n  font-weight: bold;\n}\n`","import React from 'react';\nimport {\n  LessonsListItem,\n  LockedIcon,\n  LessonsListStyle,\n  LessonLink\n} from './LessonsList.stiled';\n\nconst LessonsList = ({ course, setCurrentLesson }) => {\n  const { lessons } = course || {};\n\n  if (!lessons || !Array.isArray(lessons)) {\n    return null;\n  }\n\n  return (\n    <div>\n      <LessonsListStyle>\n        {lessons.map(lesson => (\n          <LessonsListItem key={lesson.id}>\n            <LessonLink\n              href={lesson.link}\n              onClick={e => {\n                e.preventDefault();\n                setCurrentLesson(lesson);\n                e.target.classList.add('active');\n              }}\n              disabled={lesson.status === 'locked'}\n            >\n              {lesson.title}\n            </LessonLink>\n            {lesson.status === 'locked' && (\n              <span>\n                {' '}\n                &nbsp; &nbsp; <LockedIcon />\n              </span>\n            )}\n          </LessonsListItem>\n        ))}\n      </LessonsListStyle>\n    </div>\n  );\n};\n\nexport default LessonsList;\n","import styled from 'styled-components';\nimport { NavLink } from 'react-router-dom';\n\nexport const LessonWrapper = styled.div`\n  @media (min-width: 768px) {\n    display: flex;\n  }\n`;\n\nexport const SideLessonInfo = styled.div`\n  @media (min-width: 768px) {\n    margin-top: 105px;\n    margin-left: 30px;\n  }\n`;\n\nexport const BackLink = styled(NavLink)`\n  display: block;\n  margin-bottom: 15px;\n  &:hover {\n    color: rgba(72, 37, 209, 255);\n  }\n`;\n\nexport const CourseTitle = styled.h2`\n  margin-bottom: 15px;\n  font-size: 28px;\n`;\n\nexport const VideoCourse = styled.video`\n  max-width: 100%;\n  margin-bottom: 15px;\n`;\n\nexport const MassegeTytle = styled.h2`\n  margin-top: 150px;\n  margin-bottom: 150px;\n  color: rgba(72, 37, 209, 255);\n  text-align: center;\n`;\n\nexport const LessonsTitle = styled.h3`\n  font-size: 20px;\n  margin-bottom: 20px;\n`;\n\nexport const LessonDescription = styled.p`\n  margin-bottom: 15px;\n  text-align: center;\n  font-size: 20px;\n  line-height: 1.5em;\n  color: grey;\n  @media (min-width: 768px) {\n    text-align: left;\n  }\n`;\n","import React, { useState, useEffect } from 'react';\nimport { GetCourseById } from '../../Api/Api';\nimport { useParams, useLocation } from 'react-router-dom';\nimport { VideoPlayer } from '../../components/VideoPlayer/VideoPlayer';\nimport LessonsList from '../../components/LessonsList/LessonsList';\nimport {\n  BackLink,\n  VideoCourse,\n  CourseTitle,\n  MassegeTytle,\n  LessonsTitle,\n  LessonDescription,\n  LessonWrapper,\n  SideLessonInfo,\n} from './Course.styled';\n\nconst Course = () => {\n  const { courseId } = useParams();\n  const [course, setCourse] = useState({});\n  const [currentLesson, setCurrentLesson] = useState(null);\n  const [startVideoWith, setstartVideoWith] = useState(-1);\n\n  const location = useLocation();\n  const backLinkHref = location.state?.from ?? '/courses';\n\n  useEffect(() => {\n    async function fetchCourseByID() {\n      try {\n        const response = await GetCourseById(courseId);\n        if (response) {\n          setCourse(response);\n        } else {\n          console.log('Error: response does not contain results');\n        }\n      } catch (error) {\n        console.log(`Error: ${error.message}`);\n      }\n    }\n\n    fetchCourseByID();\n  }, [courseId]);\n\n  useEffect(() => {\n    if (!course || !course.lessons || course.lessons.length === 0) {\n      return;\n    }\n    setCurrentLesson(course.lessons[0]);\n  }, [course]);\n\n  useEffect(() => {\n    if (!currentLesson) {\n      return;\n    }\n    if (currentLesson.status === 'locked') {\n      return;\n    }\n    const videoElement = document.getElementById(courseId);\n    const time = JSON.parse(\n      localStorage.getItem(`Lesson-id-${currentLesson.id}`)\n    );\n    if (time) {\n      setstartVideoWith(time);\n    }\n    const hls = VideoPlayer(currentLesson.link, videoElement, startVideoWith);\n    return () => {\n      hls.destroy();\n    };\n  }, [currentLesson, courseId, startVideoWith]);\n\n  const saveCurrentTimeVideo = e => {\n    if (!e.target.currentTime) {\n      return;\n    }\n    localStorage.setItem(\n      `Lesson-id-${currentLesson.id}`,\n      JSON.stringify(Math.floor(e.target.currentTime))\n    );\n  };\n\n  return (\n    <>\n      <LessonWrapper>\n        <div>\n          <BackLink to={backLinkHref}>Go back</BackLink>\n          <CourseTitle>{course.title}</CourseTitle>\n          {currentLesson?.status !== 'locked' ? (\n            <VideoCourse\n              id={courseId}\n              controls\n              width=\"100%\"\n              autoPlay\n              onTimeUpdate={e => saveCurrentTimeVideo(e)}\n            ></VideoCourse>\n          ) : (\n            <MassegeTytle>\n              For viewing the video, please upgrade to a premium account.\n            </MassegeTytle>\n          )}\n        </div>\n        <SideLessonInfo>\n          <LessonDescription>{course.description}</LessonDescription>\n          <LessonsTitle>Lessons:</LessonsTitle>\n          <LessonsList course={course} setCurrentLesson={setCurrentLesson} />\n        </SideLessonInfo>\n      </LessonWrapper>\n    </>\n  );\n};\n\nexport default Course;\n"],"names":["instance","axios","baseURL","token","defaults","headers","common","Authorization","GetToken","get","data","console","log","GetAllCourses","response","GetCourseById","id","VideoPlayer","link","videoElement","startPosition","hls","Hls","on","event","levels","length","loadSource","attachMedia","LessonsListStyle","styled","LessonsListItem","LockedIcon","ImEyeBlocked","LessonLink","course","setCurrentLesson","lessons","Array","isArray","map","lesson","href","onClick","e","preventDefault","target","classList","add","disabled","status","title","LessonWrapper","SideLessonInfo","BackLink","NavLink","CourseTitle","VideoCourse","MassegeTytle","LessonsTitle","LessonDescription","courseId","useParams","useState","setCourse","currentLesson","startVideoWith","setstartVideoWith","backLinkHref","useLocation","state","from","useEffect","message","fetchCourseByID","document","getElementById","time","JSON","parse","localStorage","getItem","destroy","to","controls","width","autoPlay","onTimeUpdate","currentTime","setItem","stringify","Math","floor","saveCurrentTimeVideo","description"],"sourceRoot":""}