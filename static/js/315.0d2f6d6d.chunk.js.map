{"version":3,"file":"static/js/315.0d2f6d6d.chunk.js","mappings":"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","sources":["Api/Api.jsx","components/VideoPlayer/VideoPlayer.jsx","components/LessonsList/LessonsList.stiled.js","components/LessonsList/LessonsList.jsx","pages/Course/Course.styled.js","pages/Course/Course.jsx"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst BASE_URL = 'https://api.wisey.app/api/v1';\r\n// const PROXY_URL = \"https://cors-proxy.fringe.zone/\";\r\n\r\nconst instance = axios.create({\r\n  baseURL: BASE_URL,\r\n});\r\n\r\nconst token = {\r\n  set(token) {\r\n    instance.defaults.headers.common.Authorization = `Bearer ${token}`;\r\n  },\r\n  unset() {\r\n    instance.defaults.headers.common.Authorization = '';\r\n  },\r\n};\r\n\r\nexport const GetToken = async () => {\r\n  try {\r\n    const { data } = await instance.get(\r\n      '/auth/anonymous?platform=subscriptions'\r\n    );\r\n    token.set(data.token);\r\n    return data.token;\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nexport const GetAllCourses = async () => {\r\n  await GetToken();\r\n  const response = await instance.get('/core/preview-courses');\r\n  return response;\r\n};\r\n\r\nexport const GetCourseById = async id => {\r\n  await GetToken();\r\n  const response = await instance.get(`/core/preview-courses/${id}`);\r\n  return response.data;\r\n};\r\n","import Hls from 'hls.js';\r\n\r\nexport const VideoPlayer = (link, videoElement, startPosition) => {\r\n  let hls = null;\r\n  if (Hls.isSupported()) {\r\n    hls = new Hls({ startPosition: startPosition });\r\n    hls.on(Hls.Events.MEDIA_ATTACHED, function () {\r\n      console.log('video and hls.js are now bound together !');\r\n    });\r\n    hls.on(Hls.Events.MANIFEST_PARSED, function (event, data) {\r\n      console.log(\r\n        'manifest loaded, found ' + data.levels.length + ' quality level'\r\n      );\r\n    });\r\n    hls.loadSource(`${link}`);\r\n    // bind them together\r\n    hls.attachMedia(videoElement);\r\n  }\r\n  return hls;\r\n};\r\n","import styled from 'styled-components';\r\nimport { ImEyeBlocked } from 'react-icons/im';\r\n\r\nexport const LessonsListStyle = styled.ul`\r\n  margin-left: 15px;\r\n  list-style: square;\r\n`;\r\n\r\nexport const LessonsListItem = styled.li`\r\n  font-size: 20px;\r\n\r\n  margin-bottom: 10px;\r\n  &:hover {\r\n    color: rgba(72, 37, 209, 255);\r\n  }\r\n`;\r\n\r\nexport const LockedIcon = styled(ImEyeBlocked)`\r\n  color: rgba(72, 37, 209, 255);\r\n`;\r\n","import React from 'react';\r\nimport {\r\n  LessonsListItem,\r\n  LockedIcon,\r\n  LessonsListStyle,\r\n} from './LessonsList.stiled';\r\n\r\nconst LessonsList = ({ course, setCurrentLesson }) => {\r\n  const { lessons } = course || {};\r\n\r\n  if (!lessons || !Array.isArray(lessons)) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <LessonsListStyle>\r\n        {lessons.map(lesson => (\r\n          <LessonsListItem key={lesson.id}>\r\n            <a\r\n              href={lesson.link}\r\n              onClick={e => {\r\n                e.preventDefault();\r\n                setCurrentLesson(lesson);\r\n              }}\r\n              disabled={lesson.status === 'locked'}\r\n            >\r\n              {lesson.title}\r\n            </a>\r\n            {lesson.status === 'locked' && (\r\n              <span>\r\n                {' '}\r\n                &nbsp; &nbsp; <LockedIcon />\r\n              </span>\r\n            )}\r\n          </LessonsListItem>\r\n        ))}\r\n      </LessonsListStyle>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LessonsList;\r\n","import styled from 'styled-components';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nexport const LessonWrapper = styled.div`\r\n  @media (min-width: 768px) {\r\n    display: flex;\r\n  }\r\n`;\r\n\r\nexport const SideLessonInfo = styled.div`\r\n  @media (min-width: 768px) {\r\n    margin-top: 105px;\r\n    margin-left: 30px;\r\n  }\r\n`;\r\n\r\nexport const BackLink = styled(NavLink)`\r\n  display: block;\r\n  margin-bottom: 15px;\r\n  &:hover {\r\n    color: rgba(72, 37, 209, 255);\r\n  }\r\n`;\r\n\r\nexport const CourseTitle = styled.h2`\r\n  margin-bottom: 15px;\r\n  font-size: 28px;\r\n`;\r\n\r\nexport const VideoCourse = styled.video`\r\n  max-width: 100%;\r\n  margin-bottom: 15px;\r\n`;\r\n\r\nexport const MassegeTytle = styled.h2`\r\n  margin-top: 150px;\r\n  margin-bottom: 150px;\r\n  color: rgba(72, 37, 209, 255);\r\n  text-align: center;\r\n`;\r\n\r\nexport const LessonsTitle = styled.h3`\r\n  font-size: 20px;\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nexport const LessonDescription = styled.p`\r\n  margin-bottom: 15px;\r\n  text-align: center;\r\n  font-size: 20px;\r\n  line-height: 1.5em;\r\n  color: grey;\r\n  @media (min-width: 768px) {\r\n    text-align: left;\r\n  }\r\n`;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { GetCourseById } from '../../Api/Api';\r\nimport { useParams, useLocation } from 'react-router-dom';\r\nimport { VideoPlayer } from '../../components/VideoPlayer/VideoPlayer';\r\nimport LessonsList from '../../components/LessonsList/LessonsList';\r\nimport {\r\n  BackLink,\r\n  VideoCourse,\r\n  CourseTitle,\r\n  MassegeTytle,\r\n  LessonsTitle,\r\n  LessonDescription,\r\n  LessonWrapper,\r\n  SideLessonInfo,\r\n} from './Course.styled';\r\n\r\nconst Course = () => {\r\n  const { courseId } = useParams();\r\n  const [course, setCourse] = useState({});\r\n  const [currentLesson, setCurrentLesson] = useState(null);\r\n  const [startVideoWith, setstartVideoWith] = useState(-1);\r\n\r\n  const location = useLocation();\r\n  const backLinkHref = location.state?.from ?? '/courses';\r\n\r\n  useEffect(() => {\r\n    async function fetchCourseByID() {\r\n      if (!course) {\r\n        return;\r\n      }\r\n      try {\r\n        const response = await GetCourseById(courseId);\r\n        if (response) {\r\n          setCourse(response);\r\n        } else {\r\n          console.log('Error: response does not contain results');\r\n        }\r\n      } catch (error) {\r\n        console.log(`Error: ${error.message}`);\r\n      }\r\n    }\r\n\r\n    fetchCourseByID();\r\n  }, [courseId]);\r\n\r\n  useEffect(() => {\r\n    if (!course || !course.lessons || course.lessons.length === 0) {\r\n      return;\r\n    }\r\n    setCurrentLesson(course.lessons[0]);\r\n  }, [course]);\r\n\r\n  useEffect(() => {\r\n    if (!currentLesson) {\r\n      return;\r\n    }\r\n    if (currentLesson.status === 'locked') {\r\n      return;\r\n    }\r\n    const videoElement = document.getElementById(courseId);\r\n    const time = JSON.parse(\r\n      localStorage.getItem(`Lesson-id-${currentLesson.id}`)\r\n    );\r\n    if (time) {\r\n      setstartVideoWith(time);\r\n    }\r\n    const hls = VideoPlayer(currentLesson.link, videoElement, startVideoWith);\r\n    return () => {\r\n      hls.destroy();\r\n    };\r\n  }, [currentLesson, courseId, startVideoWith]);\r\n\r\n  const saveCurrentTimeVideo = e => {\r\n    if (!e.target.currentTime) {\r\n      return;\r\n    }\r\n    localStorage.setItem(\r\n      `Lesson-id-${currentLesson.id}`,\r\n      JSON.stringify(Math.floor(e.target.currentTime))\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <LessonWrapper>\r\n        <div>\r\n          <BackLink to={backLinkHref}>Go back</BackLink>\r\n          <CourseTitle>{course.title}</CourseTitle>\r\n          {currentLesson?.status !== 'locked' ? (\r\n            <VideoCourse\r\n              id={courseId}\r\n              controls\r\n              poster={`${currentLesson?.previewImageLink}/lesson.order.webp`}\r\n              onTimeUpdate={e => saveCurrentTimeVideo(e)}\r\n            ></VideoCourse>\r\n          ) : (\r\n            <MassegeTytle>\r\n              For viewing the video, please upgrade to a premium account.\r\n            </MassegeTytle>\r\n          )}\r\n        </div>\r\n        <SideLessonInfo>\r\n          <LessonDescription>{course.description}</LessonDescription>\r\n          <LessonsTitle>Lessons:</LessonsTitle>\r\n          <LessonsList course={course} setCurrentLesson={setCurrentLesson} />\r\n        </SideLessonInfo>\r\n      </LessonWrapper>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Course;\r\n"],"names":["instance","axios","baseURL","token","defaults","headers","common","Authorization","concat","GetToken","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$instance$get","data","wrap","_context","prev","next","get","sent","abrupt","t0","console","log","stop","apply","arguments","GetAllCourses","_ref2","_callee2","response","_context2","GetCourseById","_ref3","_callee3","id","_context3","_x","VideoPlayer","link","videoElement","startPosition","hls","Hls","on","event","levels","length","loadSource","attachMedia","LessonsListStyle","styled","_templateObject","_taggedTemplateLiteral","LessonsListItem","_templateObject2","LockedIcon","ImEyeBlocked","_templateObject3","course","setCurrentLesson","lessons","Array","isArray","_jsx","children","map","lesson","_jsxs","href","onClick","e","preventDefault","disabled","status","title","LessonWrapper","SideLessonInfo","BackLink","NavLink","CourseTitle","_templateObject4","VideoCourse","_templateObject5","MassegeTytle","_templateObject6","LessonsTitle","_templateObject7","LessonDescription","_templateObject8","_location$state$from","_location$state","courseId","useParams","_useState","useState","_useState2","_slicedToArray","setCourse","_useState3","_useState4","currentLesson","_useState5","_useState6","startVideoWith","setstartVideoWith","backLinkHref","useLocation","state","from","useEffect","_fetchCourseByID","message","fetchCourseByID","document","getElementById","time","JSON","parse","localStorage","getItem","destroy","_Fragment","to","controls","poster","previewImageLink","onTimeUpdate","target","currentTime","setItem","stringify","Math","floor","saveCurrentTimeVideo","description","LessonsList"],"sourceRoot":""}